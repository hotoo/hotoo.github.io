"use strict";(self.webpackChunkhotoo_github_io=self.webpackChunkhotoo_github_io||[]).push([["524"],{7369:function(n,e,r){r.r(e),r.d(e,{default:()=>i});var t=r(74132),d=r(40453);function s(n){let e=Object.assign({h1:"h1",a:"a",p:"p",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",pre:"pre",h2:"h2",ul:"ul",li:"li"},(0,d.ah)(),n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h1,{id:"datenow",children:["Date.now()",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#datenow",children:"#"})]}),"\n",(0,t.jsxs)(e.p,{children:["以前做过一个 JavaScript 性能测试“框架”，也看过其他人做性能比较的时候，基本上\n也都是使用 ",(0,t.jsx)(e.code,{children:"new Date()"})," 来记时，会“耍点小花样”的同学会使用 ",(0,t.jsx)(e.code,{children:"+new Date()"}),"。"]}),"\n",(0,t.jsx)(e.p,{children:"现在又想做另一种性能监控的方法，便着重考量了下各种记时方案，尽量减少因为\n性能监控代码对业务代码的影响。"}),"\n",(0,t.jsxs)(e.p,{children:["下面是循环 100000 次，过程中只有计数器操作，得到的时间(ms)对照表\n(",(0,t.jsx)(e.a,{href:"https://hotoo.github.io/labs/Date.now.html",target:"_blank",rel:"noopener noreferrer",children:"Demo"}),")。"]}),"\n",(0,t.jsxs)(e.table,{children:["\n",(0,t.jsxs)(e.thead,{children:["\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.th,{children:"Browser"}),"\n",(0,t.jsx)(e.th,{children:"new Date()"}),"\n",(0,t.jsx)(e.th,{children:"new Date().getTime()"}),"\n",(0,t.jsx)(e.th,{children:"new Date().valueOf()"}),"\n",(0,t.jsx)(e.th,{children:"+new Date()"}),"\n",(0,t.jsx)(e.th,{children:"Date.now()"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.tbody,{children:["\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"IE8"}),"\n",(0,t.jsx)(e.td,{children:"469"}),"\n",(0,t.jsx)(e.td,{children:"391"}),"\n",(0,t.jsx)(e.td,{children:"375"}),"\n",(0,t.jsx)(e.td,{children:"406"}),"\n",(0,t.jsx)(e.td,{children:"-"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"Firefox6"}),"\n",(0,t.jsx)(e.td,{children:"266"}),"\n",(0,t.jsx)(e.td,{children:"258"}),"\n",(0,t.jsx)(e.td,{children:"257"}),"\n",(0,t.jsx)(e.td,{children:"259"}),"\n",(0,t.jsx)(e.td,{children:"236"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"Chrome13"}),"\n",(0,t.jsx)(e.td,{children:"46"}),"\n",(0,t.jsx)(e.td,{children:"29"}),"\n",(0,t.jsx)(e.td,{children:"29"}),"\n",(0,t.jsx)(e.td,{children:"35"}),"\n",(0,t.jsx)(e.td,{children:"20"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"Opera11"}),"\n",(0,t.jsx)(e.td,{children:"246"}),"\n",(0,t.jsx)(e.td,{children:"242"}),"\n",(0,t.jsx)(e.td,{children:"246"}),"\n",(0,t.jsx)(e.td,{children:"244"}),"\n",(0,t.jsx)(e.td,{children:"222"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"Safari5"}),"\n",(0,t.jsx)(e.td,{children:"256"}),"\n",(0,t.jsx)(e.td,{children:"232"}),"\n",(0,t.jsx)(e.td,{children:"239"}),"\n",(0,t.jsx)(e.td,{children:"255"}),"\n",(0,t.jsx)(e.td,{children:"222"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["由此可以对照出，",(0,t.jsx)(e.code,{children:"Date.now()"})," 确实有很明显的性能优势，另外 ",(0,t.jsx)(e.code,{children:"Date.now()"})," 返回是\nnumber 类型的数值，并不产生 Date 对象。"]}),"\n",(0,t.jsxs)(e.p,{children:["不过目前只有 IE9, Firefox3+, Chrome5+, Opera10.50+, Safari4+ 支持，对于不支持\n的浏览器，可以继续使用 ",(0,t.jsx)(e.code,{children:"new Date().valueOf()"})," 方法（个人不推荐用 ",(0,t.jsx)(e.code,{children:"+new Date()"}),"）："]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:'// @return {Number}\nfunction now(){\n    return ("function"==typeof Date.now) ? Date.now() : new Date().valueOf();\n}\n'})}),"\n",(0,t.jsxs)(e.h2,{id:"日期相关",children:["日期相关",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#日期相关",children:"#"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"new Date()          // now.\nnew Date(null);     // 1970/01/01 00:00:00(UTC)\nnew Date(undefined);// IE:NaN; Others:Invalid Date.\n"})}),"\n",(0,t.jsxs)(e.h2,{id:"参考阅读",children:["参考阅读",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#参考阅读",children:"#"})]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://msdn.microsoft.com/en-us/library/ff679974(v=vs.94).aspx",target:"_blank",rel:"noopener noreferrer",children:"Date.now Function (JavaScript) - MSDN"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/now",target:"_blank",rel:"noopener noreferrer",children:"Data.now() - MDN"})}),"\n"]})]})}function h(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,d.ah)(),n.components);return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(s,{...n})}):s(n)}let i=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["blog%2Fpost%2F2011%2FDate.now.md"]={toc:[{text:"日期相关",id:"日期相关",depth:2},{text:"参考阅读",id:"参考阅读",depth:2}],title:"Date.now()",headingTitle:"Date.now()",frontmatter:{date:"2011-09-18T00:00:00.000Z",tags:"JavaScript"}}}}]);