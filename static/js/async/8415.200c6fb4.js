"use strict";(self.webpackChunkhotoo_co=self.webpackChunkhotoo_co||[]).push([["8415"],{2893:function(e,n,i){i.r(n),i.d(n,{default:()=>a});var r=i(4132),l=i(453),t=i(3030);function s(e){let n=Object.assign({h1:"h1",a:"a",p:"p",ul:"ul",li:"li",pre:"pre",code:"code",blockquote:"blockquote",em:"em",ol:"ol",h2:"h2",footer:"footer",div:"div",strong:"strong",cite:"cite"},(0,l.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"逻辑与是个好东西",children:["『逻辑与』是个好东西",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#逻辑与是个好东西",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"一直很想实现 WebForms2 的语义化表单验证，最近才开始动手，执行力真差啊。"}),"\n",(0,r.jsx)(n.p,{children:"一个表单元素可以同时存在多种校验方案，比如："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"required."}),"\n",(0,r.jsx)(n.li,{children:"data type: number, date, url, email..."}),"\n",(0,r.jsx)(n.li,{children:"minlength, maxlength, min, max."}),"\n",(0,r.jsx)(n.li,{children:"pattern"}),"\n",(0,r.jsx)(n.li,{children:"用户自定义验证函数。"}),"\n",(0,r.jsx)(n.li,{children:"异步访问服务器进行业务校验。"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"通常可以通过逻辑判断进行处理："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"function verifyFormInput(input){\n  if(!verifyRequired()){return false;}\n  if(!verifyMinLength()){return false;}\n  if(!verifyMaxLength()){return false;}\n  if(!verifyInputType()){return false;}\n  if(!verifyMin()){return false;}\n  if(!verifyMax()){return false;}\n  if(!verifyPattern()){return false;}\n  if(!verifyUserRules()){return false;}\n  if(!verifySync()){return false;}\n  return true;\n}\nfunction verifyForm(form){\n    var flags = [];\n    for(var i=0,l=form.elements.length; i<l; i++){\n        // 一次只能校验一个表单元素异常。\n        //if(!verifyFormInput(form.elements[i])){return false;}\n\n        // 可以同时校验所有元素异常。但是需要辅助循环进行检查。\n        flags[i] = verifyFormInput(form.elements[i]);\n    }\n    // 辅助循环检查。\n    for(var i=0,l=flags.length; i<l; i++){\n        if(!flags[i]){return false;}\n    }\n    return true;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["实际代码中，各个 ",(0,r.jsx)(n.code,{children:"verifyXXX"})," 函数可能内联在 ",(0,r.jsx)(n.code,{children:"verifyFormInput"})," 函数中，\n代码显得多而有点乱，甚至有点冗余。"]}),"\n",(0,r.jsx)(n.p,{children:"想起模拟电路课程上学到的『与门』，只有所有电路都是通路时，整个电路才是通路。"}),"\n",(0,r.jsx)(n.p,{children:"而表单验证也是这样："}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"某个表单元素的所有验证逻辑都通过验证时，这个表单元素才算通过验证。"}),"\n",(0,r.jsx)(n.li,{children:"整个表单的所有表单元素都通过验证时，才算这个表单通过验证。"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"同时基于『逻辑与』表达式的语言特性，一旦前面的条件可以判断逻辑失败，立即返回\n失败，不再进行后面的条件判断。"}),"\n",(0,r.jsx)(n.p,{children:"LogicalANDExpression:"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Semantics"})}),"\n",(0,r.jsx)(n.p,{children:"The production LogicalANDExpression : LogicalANDExpression &&\nBitwiseORExpression is evaluated as follows:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Evaluate LogicalANDExpression."}),"\n",(0,r.jsx)(n.li,{children:"Call GetValue(Result(1))."}),"\n",(0,r.jsx)(n.li,{children:"Call ToBoolean(Result(2))."}),"\n",(0,r.jsxs)(n.li,{children:["If Result(3) is ",(0,r.jsx)(n.em,{children:"false"}),", return Result(2)."]}),"\n",(0,r.jsx)(n.li,{children:"Evaluate BitwiseORExpression."}),"\n",(0,r.jsx)(n.li,{children:"Call GetValue(Result(5))."}),"\n",(0,r.jsx)(n.li,{children:"Return Result(6)."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"BitwiseORExpression:"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Semantics"})}),"\n",(0,r.jsx)(n.p,{children:"The production A : A@B, where @ is one of the bitwise operators in the\nproductions above, is evaluated as follows:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Evaluate A."}),"\n",(0,r.jsx)(n.li,{children:"Call GetValue(Result(1))."}),"\n",(0,r.jsx)(n.li,{children:"Evaluate B."}),"\n",(0,r.jsx)(n.li,{children:"Call GetValue(Result(3))."}),"\n",(0,r.jsx)(n.li,{children:"Call ToInt32(Result(2))."}),"\n",(0,r.jsx)(n.li,{children:"Call ToInt32(Result(4))."}),"\n",(0,r.jsx)(n.li,{children:"Apply the bitwise operator @ to Result(5) and Result(6). The result is\na signed 32 bit integer."}),"\n",(0,r.jsx)(n.li,{children:"Return Result(7)."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"于是验证算法改良如下："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"function verifyFormInput(input){\n    var certified = true;\n    certified = certified && verifyRequired();\n    certified = certified && verifyMinLength();\n    certified = certified && verifyMaxLength();\n    certified = certified && verifyInputType();\n    certified = certified && verifyMin();\n    certified = certified && verifyMax();\n    certified = certified && verifyPattern();\n    certified = certified && verifyUserRules();\n    certified = certified && verifySync();\n    return certified;\n}\nfunction verifyForm(form){\n    var certified = true;\n    for(var i=0,flag,l=form.elements.length; i<l; i++){\n        // 一次只能校验一个表单元素异常。\n        //certified = certified && verifyFormInput(form.elements[i]);\n\n        // 可以同时校验所有元素异常。无需辅助循环进行检查。\n        flag = verifyFormInput(form.elements[i]);\n        certified = certified && flag;\n    }\n    return certified;\n}\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"延伸",children:["延伸",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#延伸",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"以前也 Hack 的用过逻辑与表达式，比如："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"flag && action();\n"})}),"\n",(0,r.jsx)(n.p,{children:"但这个用法只是用到了条件判断的作用，类似于："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"if(flag){action();}\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"参考阅读",children:["参考阅读",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#参考阅读",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://www.ecmascript.org/",target:"_blank",rel:"noopener noreferrer",children:"ECMAScript"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://zh.wikipedia.org/wiki/%E9%80%BB%E8%BE%91%E4%B8%8E",target:"_blank",rel:"noopener noreferrer",children:"逻辑与"}),"\n",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Logical_conjunction",target:"_blank",rel:"noopener noreferrer",children:"Logical_conjunction"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://zh.wikipedia.org/wiki/%E4%B8%8E%E9%97%A8",target:"_blank",rel:"noopener noreferrer",children:"与门"}),"\n",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/AND_gate",target:"_blank",rel:"noopener noreferrer",children:"AND_gate"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)("footer",{class:"blog-post-footer",children:[(0,r.jsx)("div",{class:"blog-post-footer-meta meta-left",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tags:"})," ",(0,r.jsx)("a",{href:"/blog/tags/JavaScript",children:(0,r.jsx)("cite",{class:"tags",children:"JavaScript"})})]})}),(0,r.jsx)("div",{class:"blog-post-footer-meta meta-right",children:(0,r.jsxs)(n.p,{children:["Published on ",(0,r.jsx)("cite",{class:"date",children:"2012-05-01"})]})})]}),"\n",(0,r.jsx)(t.DiscussionEmbed,{shortname:"hotoo",config:{url:"https://hotoo.co/blog/post/logical-conjunction.html",identifier:["github-gitlab-or-bitbucket","git-branch","vim-tutor","eventlistenerlist","gtalk-group-for-vim","dropbox-died-in-china","vim-chinese-doc"].includes("logical-conjunction")?"logical-conjunction":"/blog/post/logical-conjunction.html",title:"『逻辑与』是个好东西",language:"zh_CN"}})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(s,{...e})}):s(e)}let a=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["..%2Fnode_modules%2F.rspress%2Fruntime%2Ftemp-67.mdx"]={toc:[{text:"延伸",id:"延伸",depth:2},{text:"参考阅读",id:"参考阅读",depth:2}],title:"『逻辑与』是个好东西",headingTitle:"『逻辑与』是个好东西",frontmatter:{category:null,tags:"JavaScript",date:"2012-05-01T00:00:00.000Z",sidebar:!1,footer:!1}}}}]);