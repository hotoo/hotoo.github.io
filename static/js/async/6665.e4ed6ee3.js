"use strict";(self.webpackChunkhotoo_github_io=self.webpackChunkhotoo_github_io||[]).push([["6665"],{84838:function(e,t,n){n.r(t),n.d(t,{default:()=>i});var r=n(74132),a=n(40453);function h(e){let t=Object.assign({h1:"h1",a:"a",p:"p",pre:"pre",code:"code"},(0,a.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.h1,{id:"周数week-number-weeknum计算",children:["周数(Week Number, WeekNum)计算",(0,r.jsx)(t.a,{className:"header-anchor","aria-hidden":"true",href:"#周数week-number-weeknum计算",children:"#"})]}),"\n",(0,r.jsxs)(t.p,{children:["jQuery UI v1.8rc 版的日历控件已经非常完善，比之 v1.7.1 已经支持显示周数(WeekNum)，\r\n而且计算 WeekNum 的算法可以自定义；而 ",(0,r.jsx)(t.a,{href:"http://www.my97.net/dp/demo/index.htm",target:"_blank",rel:"noopener noreferrer",children:"My97DatePicker"}),"\r\n的算法又有Bug。对于两年交接的周，有两种常见的算法："]}),"\n",(0,r.jsx)(t.p,{children:"每年 1月 1日所在的周均为该年的第 1周（如MS Excel的WeekNum()函数和 jQuery 实现）；"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.\r\n   @param  date  Date - the date to get the week for\r\n   @return  number - the number of the week within the year that contains this date */\r\niso8601Week: function(date) {\r\n    var checkDate = new Date(date.getTime());\r\n    // Find Thursday of this week starting on Monday\r\n    checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));\r\n    var time = checkDate.getTime();\r\n    checkDate.setMonth(0); // Compare with Jan 1\r\n    checkDate.setDate(1);\r\n    return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;\r\n},\n"})}),"\n",(0,r.jsx)(t.p,{children:"每年最后 1天所在的周"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"/**\r\n * @param date {Date} 每周第 1天。\r\n * @return {Number}\r\n */\r\ncalculateWeek:function(date){\r\n    var d = new Date(date.getTime()+(6*86400000)), t=d.getTime();\r\n    var start = new Date(d.getTime()); start.setMonth(0); start.setDate(1);\r\n    return Math.floor((t - start.getTime())/86400000/7)+1;\r\n}\n"})}),"\n",(0,r.jsx)(t.p,{children:"而从自然语言中来说，这交接的一周即可以是头一年的最后一周，也可以是后一年的第 1周。"})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,a.ah)(),e.components);return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}let i=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["blog%2Fpost%2F2010%2Fweeknumber.md"]={toc:[],title:"周数(Week Number, WeekNum)计算",headingTitle:"周数(Week Number, WeekNum)计算",frontmatter:[{template:"post.html"},{date:"2010-03-16T00:00:00.000Z"},{tags:"JavaScript, 算法"}]}}}]);