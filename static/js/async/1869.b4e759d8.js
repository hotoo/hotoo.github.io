"use strict";(self.webpackChunkhotoo_github_io=self.webpackChunkhotoo_github_io||[]).push([["1869"],{8619:function(n,r,e){e.r(r),e.d(r,{default:()=>i});var o=e(4132),s=e(453);function t(n){let r=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",pre:"pre",footer:"footer",div:"div",strong:"strong",cite:"cite"},(0,s.ah)(),n.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(r.h1,{id:"javascript-异常初步",children:["JavaScript 异常初步",(0,o.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#javascript-异常初步",children:"#"})]}),"\n",(0,o.jsx)(r.p,{children:'\\n Error, TypeError, ReferenceError\n\\n try/catch/finally\n\\n window.onerror / window.addEventListener("error")\n\\n on("error") events'}),"\n",(0,o.jsx)(r.p,{children:"\\n\\n\\n\\n"}),"\n",(0,o.jsx)(r.p,{children:"异常处理"}),"\n",(0,o.jsx)(r.p,{children:"| Browser   | message | description | line | number | lineNumber | name | fileName | stack |\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n|\n| IE8       | √      | √          | \xd7   | \xd7     | \xd7         | √   | \xd7       | \xd7    |\n| Firefox 5 | √      | \xd7          | \xd7   | \xd7     | √         | √   | √       | √    |\n| Chrome 12 | √      | \xd7          | \xd7   | \xd7     | \xd7         | √   | \xd7       | √    |\n| Safari 5  | √      | \xd7          | √   | \xd7     | \xd7         | √   | \xd7       | \xd7    |\n| Opera 11  | √      | \xd7          | \xd7   | \xd7     | \xd7         | √   | \xd7       | √    |"}),"\n",(0,o.jsx)(r.p,{children:"属性描述："}),"\n",(0,o.jsxs)(r.p,{children:["message:: ",String," 异常消息描述，全部浏览器都支持。\nname:: 错误名称，一般等同于错误类型名，如 Error, TypeError, ReferenceError...。不过实际抛出的同一个错误，不同浏览器的 name 值可能不一致(下面讲述)。\ndescription:: 异常描述，IE 中同 message，其他浏览器不支持。\nline:: 错误行号，仅 Safari 支持。\nnumber:: 错误编号，例如“缺少对象”是 \\n2146823281。“xx未定义”是 \\n2146823279。仅 IE 支持。\nlineNumber:: 错误发生所在行号，仅 Firefox 支持。\nfileName:: 发生错误的所在文件地址，仅 Firefox 支持。"]}),"\n",(0,o.jsx)(r.p,{children:"构造函数的参数&顺序："}),"\n",(0,o.jsxs)(r.p,{children:["| 参数    | 1(个)                     | 2(个)                     | 3(个)                                |\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\n| Firefox | ",(0,o.jsx)(r.code,{children:"Error(message)"}),"          | ",(0,o.jsx)(r.code,{children:"Error(message,fileName)"})," | ",(0,o.jsx)(r.code,{children:"Error(message,fileName,lineNumber)"})," |\n| IE      | ",(0,o.jsx)(r.code,{children:"Error(<Number> number)"}),"  | ",(0,o.jsx)(r.code,{children:"Error(number,message)"}),"   | >                                    |\n| /      | ",(0,o.jsx)(r.code,{children:"Error(<String> message)"})," | /                        | >                                    |\n| Chrome  | ",(0,o.jsx)(r.code,{children:"Error(message)"}),"          | >                         | >                                    |\n| Safari  | /                        | >                         | >                                    |\n| Opera   | /                        | >                         | >                                    |"]}),"\n",(0,o.jsxs)(r.p,{children:["Note: IE, ",(0,o.jsx)(r.code,{children:"new Error(String message)"})," \\n ",(0,o.jsx)(r.code,{children:"<Object,Array,RegExp,...>.toString()"})]}),"\n",(0,o.jsx)(r.p,{children:"JavaScript 有多种原生异常类型，包括最常见的 Error 和 EvalError, RangeError,\nReferenceError, SyntaxError, TypeError, URIError. 这些原生异常类型分别对应的\n意义是："}),"\n",(0,o.jsx)(r.p,{children:"Error:: 异常的基类。\nEvalError:: 发生在 eval() 函数中的异常。\nRangeError:: 数值超出 JavaScript 可表示的范围。\nReferenceError:: 使用了非法的引用。\nSyntaxError:: 在 eval() 中发生了语法错误的异常。除此之外的语法错误异常，均无法通过 try/catch 和 onerror 捕获，这类异常会直接报告给浏览器。\nTypeError:: 变量类型不是预期的。\nURIError:: 在 encodeURI() 和 decodeURI() 函数中发生异常。"}),"\n",(0,o.jsx)(r.p,{children:"TODO: 每种异常类型都带有以下成员/方法。\nmessage::\nline::"}),"\n",(0,o.jsxs)(r.p,{children:["值得注意的是，直接掷出 Error 之外的其他原生异常（如 ",(0,o.jsx)(r.code,{children:'throw new EvalError("msg")'}),"）\n时，IE 浏览器是无法捕获异常消息的，统一的异常消息是“例外被抛出且未被接住”。"]}),"\n",(0,o.jsxs)(r.p,{children:["而在 try","catch(ex)"," 中可以拿到更详细的异常信息。"]}),"\n",(0,o.jsx)(r.p,{children:'JavaScript 也可以掷出其他类型的异常，如 throw "xx error."'}),"\n",(0,o.jsxs)(r.h2,{id:"捕获异常",children:["捕获异常",(0,o.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#捕获异常",children:"#"})]}),"\n",(0,o.jsxs)(r.p,{children:["推荐的异常捕获方法是 ",(0,o.jsx)(r.code,{children:"try/catch"}),"，不过也可以简单使用全局异常捕获方式："]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:"window.onerror = function(msg, file, line){\n    return true;\n};\n"})}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"window.onerror"})," 事件可以捕获浏览器端掷出的所有异常，并可以拿到错误消息，所在文件，\n及错误所在行。但是无法获得异常对象本身，及触发异常的事件对象。"]}),"\n",(0,o.jsx)(r.p,{children:"注意：onerror 事件不在早期的 HTML4 规范中，只有 IE, Firefox 和后续的 Chrome 才有\n支持，Safari, Opera 至今没有支持这个事件。"}),"\n",(0,o.jsx)(r.p,{children:"一般来说，绑定事件(addEventListener/attachEvent)的方式比给 HTML DOM 元素直接连接事件处理函数的方式要好。"}),"\n",(0,o.jsx)(r.p,{children:"但是为 window 绑定 error 事件却似乎不太理想。\nIE 浏览器能得到 4 个参数（比 onerror 多一个），但有效的还是前面 3 个（跟 onerror 一致）。\n而其他浏览器却只能得到一个参数，即错误事件（FF 得到的是 Error，Chrome 得到的 ErrorEvent。"}),"\n",(0,o.jsx)(r.p,{children:"题外话，对于 HTML 元素的 onerror 事件一般会触发在加载外部资源时。"}),"\n",(0,o.jsxs)(r.h2,{id:"无法捕获的异常",children:["无法捕获的异常",(0,o.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#无法捕获的异常",children:"#"})]}),"\n",(0,o.jsxs)(r.p,{children:["如果 ",(0,o.jsx)(r.code,{children:"onerror"})," 所在 ",(0,o.jsx)(r.code,{children:"<script>"})," 块本身有语法错误，会导致 ",(0,o.jsx)(r.code,{children:"onerror"})," 错误处理脚本本身无法\n被执行，也就无法初始化全局异常处理函数。"]}),"\n",(0,o.jsx)(r.p,{children:"或者异常发生在初始化全局异常处理函数之前，这个异常也无法被全局处理函数捕获。"}),"\n",(0,o.jsxs)(r.h2,{id:"延伸阅读",children:["延伸阅读",(0,o.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#延伸阅读",children:"#"})]}),"\n",(0,o.jsxs)(r.p,{children:["\\n ",(0,o.jsx)(r.a,{href:"https://developer.mozilla.org/en/JavaScript/Reference/Global%5CnObjects/Error",target:"_blank",rel:"noopener noreferrer",children:"Error \\n MDC Doc Center"}),"\n\\n ",(0,o.jsx)(r.a,{href:"https://developer.mozilla.org/en/DOM/window.onerror",target:"_blank",rel:"noopener noreferrer",children:"window.onerror \\n MDC Doc Center"}),"\n\\n ",(0,o.jsx)(r.a,{href:"https://msdn.microsoft.com/en%5Cnus/library/cc197053%28VS.85%29.aspx",target:"_blank",rel:"noopener noreferrer",children:"onerror Event"}),"\n\\n ",(0,o.jsx)(r.a,{href:"https://www.javascriptkit.com/javatutors/error.shtml",target:"_blank",rel:"noopener noreferrer",children:"The onerror event of the window object"}),"\n",(0,o.jsx)(r.a,{href:"https://www.javascriptkit.com/javatutors/error2.shtml",target:"_blank",rel:"noopener noreferrer",children:"2"}),"\n",(0,o.jsx)(r.a,{href:"https://www.javascriptkit.com/javatutors/error3.shtml",target:"_blank",rel:"noopener noreferrer",children:"3"}),"\n",(0,o.jsx)(r.a,{href:"https://www.javascriptkit.com/javatutors/error4.shtml",target:"_blank",rel:"noopener noreferrer",children:"4"}),"\n\\n ",(0,o.jsx)(r.a,{href:"https://developer.mozilla.org/en/JavaScript/Reference/Global%5CnObjects/TypeError",target:"_blank",rel:"noopener noreferrer",children:"TypeError"}),"\n\\n ",(0,o.jsx)(r.a,{href:"https://hi.baidu.com/fcl06/blog/item/c3721bfa2643689058ee9040.html",target:"_blank",rel:"noopener noreferrer",children:"js判断错误类型"}),"\n\\n ",(0,o.jsx)(r.a,{href:"https://www.iefans.net/ie%5Cnjavascript%5Cnerror/",target:"_blank",rel:"noopener noreferrer",children:"解析IE浏览器中的Javascript Error对象"}),"\n\\n ",(0,o.jsx)(r.a,{href:"https://damnit.jupiterit.com/home/learn",target:"_blank",rel:"noopener noreferrer",children:"DamnIT"}),"\n\\n ",(0,o.jsx)(r.a,{href:"https://www.exceptionhub.com/",target:"_blank",rel:"noopener noreferrer",children:"ExceptionHub"})]}),"\n",(0,o.jsxs)("footer",{class:"blog-post-footer",children:[(0,o.jsx)("div",{class:"blog-post-footer-meta meta-left",children:(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Tags:"})," ",(0,o.jsx)("a",{href:"/blog/tags/JavaScript",children:(0,o.jsx)("cite",{class:"tags",children:"JavaScript"})}),", ",(0,o.jsx)("a",{href:"/blog/tags/Exceptions",children:(0,o.jsx)("cite",{class:"tags",children:"Exceptions"})})]})}),(0,o.jsx)("div",{class:"blog-post-footer-meta meta-right",children:(0,o.jsxs)(r.p,{children:["Published on ",(0,o.jsx)("cite",{class:"date",children:"2011-04-03"})]})})]})]})}function a(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,s.ah)(),n.components);return r?(0,o.jsx)(r,{...n,children:(0,o.jsx)(t,{...n})}):t(n)}let i=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["..%2Fnode_modules%2F.rspress%2Fruntime%2Ftemp-97.mdx"]={toc:[{text:"捕获异常",id:"捕获异常",depth:2},{text:"无法捕获的异常",id:"无法捕获的异常",depth:2},{text:"延伸阅读",id:"延伸阅读",depth:2}],title:"JavaScript 异常初步",headingTitle:"JavaScript 异常初步",frontmatter:{category:null,tags:"JavaScript, Exceptions",date:"2011-04-03T00:00:00.000Z",sidebar:!1,footer:!1}}}}]);