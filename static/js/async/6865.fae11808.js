"use strict";(self.webpackChunkhotoo_github_io=self.webpackChunkhotoo_github_io||[]).push([["6865"],{5809:function(n,e,r){r.r(e),r.d(e,{default:()=>t});var a=r(4132),i=r(453);function s(n){let e=Object.assign({h1:"h1",a:"a",p:"p",code:"code",pre:"pre",h2:"h2",footer:"footer",div:"div",strong:"strong",cite:"cite"},(0,i.ah)(),n.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.h1,{id:"深入-iframe-自适应高度",children:["深入 Iframe 自适应高度",(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#深入-iframe-自适应高度",children:"#"})]}),"\n",(0,a.jsx)(e.p,{children:"DOCTYPE(CSS1Compat): HTML5, HTML4.01 Strict, HTML4.01 Transitional,\nXHTML1.0 Frameset, XHTML1.0 Strict, XHTML1.0 Transitional, XHTML1.1."}),"\n",(0,a.jsx)(e.p,{children:"| browser | documentElement |              | body         |              |\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\n|         | scrollHeight    | offsetHeight | scrollHeight | offsetHeight |\n| IE      | √              | \xd7           | √           | √           |\n| FF      | √              | √           | √           | √           |\n| Chrome  | √              | √           | √           | √           |\n| Safari  | √              | √           | √           | √           |\n| Opera   | √              | √           | √           | √           |"}),"\n",(0,a.jsx)(e.p,{children:"non\\ndoctype(BackCompat): 无 DOCTYPE, IE: DOCTYPE 前有非空白字符（包括注释）。"}),"\n",(0,a.jsx)(e.p,{children:"| browser    | documentElement |              | body         |              |\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n|\n|            | scrollHeight    | offsetHeight | scrollHeight | offsetHeight |\n| IE8        | \xd7              | \xd7           | √           | \xd7           |\n| FF5        | √              | √           | √           | √           |\n| Chrome13   | √              | √           | √           | √           |\n| Safari5    | √              | √           | √           | √           |\n| Opera11.50 | √              | √           | √           | \xd7           |"}),"\n",(0,a.jsx)(e.p,{children:"测试环境：Windows Server 2003."}),"\n",(0,a.jsxs)(e.p,{children:["综上所述：使用 ",(0,a.jsx)(e.code,{children:"document.body.scrollHeight"})," 是最合适的。"]}),"\n",(0,a.jsxs)(e.h1,{id:"计算高度的时机",children:["计算高度的时机",(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#计算高度的时机",children:"#"})]}),"\n",(0,a.jsx)(e.p,{children:"父窗口检测子窗口："}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-css",children:"iframe[onload=handler]\n"})}),"\n",(0,a.jsx)(e.p,{children:"本窗口自检测："}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:"dom\\nready = handler;\nwindow.onload = handler;\nbody[onload=handler]\n"})}),"\n",(0,a.jsxs)(e.h2,{id:"子窗口获取自身在父窗口的-iframe-元素",children:["子窗口获取自身在父窗口的 iframe 元素",(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#子窗口获取自身在父窗口的-iframe-元素",children:"#"})]}),"\n",(0,a.jsx)(e.p,{children:"如果父窗口有名字的话，可以直接通过 frames[name] 直接引用。"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:'// 求教更恰当的命名。\nfunction getParentFrame(){\n  if(parent == window){return null;}\n  if(window.name){return parent.frames[window.name];}\n  var ifr = parent.document.getElementsByTagName("iframe");\n  for(var i=0,l=ifr.length; i<l; i++){\n    if(window == ifr[i].contentWindow){\n      return ifr[i];\n    }\n  }\n  var ifr = parent.document.getElementsByTagName("frame");\n  for(var i=0,l=ifr.length; i<l; i++){\n    if(window == ifr[i].contentWindow){\n      return ifr[i];\n    }\n  }\n  return null;\n};\n'})}),"\n",(0,a.jsxs)(e.h2,{id:"其他相关",children:["其他相关",(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#其他相关",children:"#"})]}),"\n",(0,a.jsxs)(e.p,{children:["上面的 ",(0,a.jsx)(e.code,{children:"getParentFrame"})," 通过窗口名字直接取得元素本身，这里要注意的一点，\n以前写代码的时候有这样的代码定义："]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:'function(){\n  var elem = "elem",\n      name = "name",\n      desc = "desc";\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:"后来要增加一个变量，但是不小心写错标点符号。"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:'  function(){\n      var elem = "elem",\n+         id = elem.id;\n          name = "name",\n          desc = "desc";\n  }\n'})}),"\n",(0,a.jsxs)(e.p,{children:["然后 name 就成了全局变量，无意中修改了 ",(0,a.jsx)(e.code,{children:"window.name"})," 的值。\n所以如果使用 name 作为局部变量的时候，千万要小心，否则执行这段代码之后，\n",(0,a.jsx)(e.code,{children:"a[target=oldName]"})," 的链接会因为找不到 ",(0,a.jsx)(e.code,{children:"frames[oldName]"})," 而弹出新窗口。"]}),"\n",(0,a.jsxs)(e.h2,{id:"延伸阅读",children:["延伸阅读",(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#延伸阅读",children:"#"})]}),"\n",(0,a.jsxs)(e.p,{children:["\\n ",(0,a.jsx)(e.a,{href:"https://ued.koubei.com/?p=243",target:"_blank",rel:"noopener noreferrer",children:"再谈iframe自适应高度"}),"\n\\n ",(0,a.jsx)(e.a,{href:"https://ued.koubei.com/?p=1217",target:"_blank",rel:"noopener noreferrer",children:"三谈Iframe自适应高度"})]}),"\n",(0,a.jsxs)("footer",{class:"blog-post-footer",children:[(0,a.jsx)("div",{class:"blog-post-footer-meta meta-left",children:(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Tags:"})," ",(0,a.jsx)("a",{href:"/blog/tags/JavaScript",children:(0,a.jsx)("cite",{class:"tags",children:"JavaScript"})})]})}),(0,a.jsx)("div",{class:"blog-post-footer-meta meta-right",children:(0,a.jsxs)(e.p,{children:["Published on ",(0,a.jsx)("cite",{class:"date",children:"2011-08-24"})]})})]})]})}function d(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.ah)(),n.components);return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(s,{...n})}):s(n)}let t=d;d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["..%2Fnode_modules%2F.rspress%2Fruntime%2Ftemp-75.mdx"]={toc:[{text:"子窗口获取自身在父窗口的 iframe 元素",id:"子窗口获取自身在父窗口的-iframe-元素",depth:2},{text:"其他相关",id:"其他相关",depth:2},{text:"延伸阅读",id:"延伸阅读",depth:2}],title:"计算高度的时机",headingTitle:"计算高度的时机",frontmatter:{category:null,tags:"JavaScript",date:"2011-08-24T00:00:00.000Z",sidebar:!1,footer:!1}}}}]);