"use strict";(self.webpackChunkhotoo_github_io=self.webpackChunkhotoo_github_io||[]).push([["9211"],{12269:function(n,e,r){r.r(e),r.d(e,{default:()=>l});var t=r(74132),s=r(40453);function d(n){let e=Object.assign({ul:"ul",li:"li",h1:"h1",a:"a",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",p:"p",em:"em",pre:"pre",code:"code",h2:"h2",ol:"ol"},(0,s.ah)(),n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{}),"\n"]}),"\n",(0,t.jsxs)(e.h1,{id:"丢弃图片的-http-请求",children:["丢弃图片的 HTTP 请求",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#丢弃图片的-http-请求",children:"#"})]}),"\n",(0,t.jsxs)(e.table,{children:["\n",(0,t.jsxs)(e.thead,{children:["\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.th,{children:"OS"}),"\n",(0,t.jsx)(e.th,{children:"Browser"}),"\n",(0,t.jsx)(e.th,{children:'""'}),"\n",(0,t.jsx)(e.th,{children:"null"}),"\n",(0,t.jsx)(e.th,{children:"remove"}),"\n",(0,t.jsx)(e.th,{children:"delete"}),"\n",(0,t.jsx)(e.th,{children:"stop"}),"\n",(0,t.jsx)(e.th,{children:"StopImage"}),"\n",(0,t.jsx)(e.th,{children:"Stop"}),"\n",(0,t.jsx)(e.th,{children:"Button"}),"\n",(0,t.jsx)(e.th,{children:"Timeout"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.tbody,{children:["\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"Windows"}),"\n",(0,t.jsx)(e.td,{children:"IE6,7,8"}),"\n",(0,t.jsx)(e.td,{children:"√(e)"}),"\n",(0,t.jsx)(e.td,{children:"√(e)"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"21s (e)"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"/"}),"\n",(0,t.jsx)(e.td,{children:"FF4,5"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"21s (e)"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"/"}),"\n",(0,t.jsx)(e.td,{children:"Chrome12"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"21s (e)"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"/"}),"\n",(0,t.jsx)(e.td,{children:"Safari4,5"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"21s (e)"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"/"}),"\n",(0,t.jsx)(e.td,{children:"Opera9"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"√(e)"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"47s (e)"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"/"}),"\n",(0,t.jsx)(e.td,{children:"Opera11"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"√(e)"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"47s (e)"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"Mac OS X"}),"\n",(0,t.jsx)(e.td,{children:"Safari5"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"1.2m (e)"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"/"}),"\n",(0,t.jsx)(e.td,{children:"Chrome12"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"1.2m (e)"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"/"}),"\n",(0,t.jsx)(e.td,{children:"FF4,5"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"1m'15s (e)"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"Ubuntu"}),"\n",(0,t.jsx)(e.td,{children:"FF4,5"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{}),"\n",(0,t.jsx)(e.td,{children:"3m'9s (e)"}),"\n"]}),"\n",(0,t.jsxs)(e.tr,{children:["\n",(0,t.jsx)(e.td,{children:"/"}),"\n",(0,t.jsx)(e.td,{children:"Chrom(e/ium)12"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"II"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{children:"\xd7"}),"\n",(0,t.jsx)(e.td,{}),"\n",(0,t.jsx)(e.td,{children:"3.2m (e)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Windows XP, Server 2003, 7."}),"\n",(0,t.jsx)(e.li,{children:"Mac OS X 10.6.7"}),"\n",(0,t.jsx)(e.li,{children:"Ubuntu 11.04"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.em,{children:"标题注解："})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'"":: `img.src = ""`\nnull:: `img.src = null`\nrevmove:: `img.removeAttribute("src")`\ndelete:: `delete img["src"]`\nstop:: `window.stop()`\nStopImage:: `document.execCommand("StopImage")`\nStop:: `document.execCommand("Stop")`\nButton:: Browser Stop Button.\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.em,{children:"图标注解："})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"√:: 能够 Abort 图片请求，并回调 (e)onerror/(a)onabort/(l)onload 函数。\nII:: 能够 Abort 图片请求，但不触发任何事件进行回调。\n≈:: 部分版本支持。如 Stop/StopImage 在 .NET Framework 3.0 中取消了支持。\n\xd7:: 不能 Abort 图片请求，或不支持该方法。\n"})}),"\n",(0,t.jsxs)(e.h2,{id:"事件回调",children:["事件回调",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#事件回调",children:"#"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:'var img = new Image();\nimg.onload = function(){out.innerHTML += "loaded.";};\nimg.onabort = function(){out.innerHTML += "aborted.";};\nimg.onerror = function(){out.innerHTML += "errored.";};\nwindow.setTimeout(function(){\n    out.innerHTML += "before.";\n    // abort.\n    img.src = null;\n    out.innerHTML += "after." + img.complete;\n}, 2000);\n'})}),"\n",(0,t.jsx)(e.p,{children:"测试结果："}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"IE:: before.errored.after.\nOpera:: before.after.errored.\nFF:: before.after.\nChrome:: before.after.\nSafari:: before.after.\n"})}),"\n",(0,t.jsxs)(e.h2,{id:"todo丢弃-jsonp-请求",children:["TODO:丢弃 jsonp 请求？",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#todo丢弃-jsonp-请求",children:"#"})]}),"\n",(0,t.jsx)(e.p,{children:"为什么不是 script/link?"}),"\n",(0,t.jsx)(e.p,{children:'使用 document.createElement("script") 创建元素并设置 src 属性，\nappendChild 到 DOM 中会去请求指定资源，可以到底向日志服务器发送数据的要求。'}),"\n",(0,t.jsx)(e.p,{children:"但是使用这种方式有一下几点弊端："}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"创建脚本带来的危险性。"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"会向 DOM 中附加元素，影响 DOMLint 校验。"}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["无法 abort，无论设置 ",(0,t.jsx)(e.code,{children:"script = null;"}),", ",(0,t.jsx)(e.code,{children:'script.src="";'}),", ",(0,t.jsx)(e.code,{children:"script.src=null;"}),",\n",(0,t.jsx)(e.code,{children:'script.removeAttribute("src");'}),", ",(0,t.jsx)(e.code,{children:"document.body.removeChild(script);"}),"\n都无法实现 abort."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"引入资源不触发 onload/onerror/onabort 事件，除非使用 jsonp 的方式，\n对元素本身无法得到回调。"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.h2,{id:"see-also",children:["See Also",(0,t.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#see-also",children:"#"})]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://stackoverflow.com/questions/930237/javascript-cancel-stop-image-requests",target:"_blank",rel:"noopener noreferrer",children:"http://stackoverflow.com/questions/930237/javascript-cancel-stop-image-requests"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://www.sysopt.com/forum/archive/index.php/t-177147.html",target:"_blank",rel:"noopener noreferrer",children:"http://www.sysopt.com/forum/archive/index.php/t-177147.html"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://stackoverflow.com/questions/1671717/javascript-image-onabort-event-not-firing-in-firefox-chrome",target:"_blank",rel:"noopener noreferrer",children:"http://stackoverflow.com/questions/1671717/javascript-image-onabort-event-not-firing-in-firefox-chrome"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://stackoverflow.com/questions/4506160/abort-active-image-requests",target:"_blank",rel:"noopener noreferrer",children:"http://stackoverflow.com/questions/4506160/abort-active-image-requests"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://www.devguru.com/technologies/ecmascript/quickref/image.html",target:"_blank",rel:"noopener noreferrer",children:"http://www.devguru.com/technologies/ecmascript/quickref/image.html"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://stackoverflow.com/questions/930237/javascript-cancel-stop-image-requests",target:"_blank",rel:"noopener noreferrer",children:"Javascript: Cancel/Stop Image Requests"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://www.google.com/support/forum/p/Chrome/thread?tid=4bf113154d53d101&hl=en",target:"_blank",rel:"noopener noreferrer",children:"Can't you stop images from loading?"})}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"window.stop()"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://stackoverflow.com/questions/930237/javascript-cancel-stop-image-requests",target:"_blank",rel:"noopener noreferrer",children:"http://stackoverflow.com/questions/930237/javascript-cancel-stop-image-requests"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://stackoverflow.com/questions/3146200/stop-loading-of-images-on-a-hashchange-event-via-javascript-or-jquery",target:"_blank",rel:"noopener noreferrer",children:"http://stackoverflow.com/questions/3146200/stop-loading-of-images-on-a-hashchange-event-via-javascript-or-jquery"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://developer.mozilla.org/en/DOM/window.stop",target:"_blank",rel:"noopener noreferrer",children:"https://developer.mozilla.org/en/DOM/window.stop"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"execCommand"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://msdn.microsoft.com/en-us/library/ms536419%28v=vs.85%29.aspx",target:"_blank",rel:"noopener noreferrer",children:"execCommand Method"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://msdn.microsoft.com/en-us/library/ms536419%28v=vs.85%29.aspx",target:"_blank",rel:"noopener noreferrer",children:"http://msdn.microsoft.com/en-us/library/ms536419%28v=vs.85%29.aspx"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://msdn.microsoft.com/en-us/library/ms533049%28v=vs.85%29.aspx",target:"_blank",rel:"noopener noreferrer",children:"http://msdn.microsoft.com/en-us/library/ms533049%28v=vs.85%29.aspx"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://developer.mozilla.org/En/Document.execCommand",target:"_blank",rel:"noopener noreferrer",children:"https://developer.mozilla.org/En/Document.execCommand"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://www.xiahaixia.com/2010/11/19/ie6%E4%B8%8B%E9%93%BE%E6%8E%A5onclick%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E4%B8%AD%E7%9A%84%E8%AF%B7%E6%B1%82%E8%A2%ABaborted/",target:"_blank",rel:"noopener noreferrer",children:"IE6下链接ONCLICK事件处理中的请求被ABORTED"})}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"http://www.cnblogs.com/zhyt1985/archive/2009/05/27/1490755.html",target:"_blank",rel:"noopener noreferrer",children:"What does (Aborted) mean in HttpWatch?"}),"\n",(0,t.jsx)(e.a,{href:"http://www.sanotes.net/html/y2008/165.html",target:"_blank",rel:"noopener noreferrer",children:"来源"})]}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://blog.httpwatch.com/2007/11/20/error_internet_invalid_url-httpwatch/",target:"_blank",rel:"noopener noreferrer",children:"http://blog.httpwatch.com/2007/11/20/error_internet_invalid_url-httpwatch/"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"http://www.cnblogs.com/mayingbao/archive/2007/11/30/978530.html",target:"_blank",rel:"noopener noreferrer",children:"HttpWatch工具简介及使用技巧"})}),"\n"]})]})}function i(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,s.ah)(),n.components);return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}let l=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["blog%2Fpost%2F2011%2Fabort-image-request.md"]={toc:[{text:"事件回调",id:"事件回调",depth:2},{text:"TODO:丢弃 jsonp 请求？",id:"todo丢弃-jsonp-请求",depth:2},{text:"See Also",id:"see-also",depth:2}],title:"丢弃图片的 HTTP 请求",headingTitle:"丢弃图片的 HTTP 请求",frontmatter:[{template:"post.html"},{pubdate:"2011-06-23T00:00:00.000Z"},{tags:"JavaScript, HTTP"}]}}}]);