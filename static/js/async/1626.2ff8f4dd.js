"use strict";(self.webpackChunkhotoo_github_io=self.webpackChunkhotoo_github_io||[]).push([["1626"],{4588:function(e,n,s){s.r(n),s.d(n,{default:()=>i});var r=s(4132),c=s(453);function t(e){let n=Object.assign({h1:"h1",a:"a",img:"img",p:"p",code:"code",pre:"pre",ol:"ol",li:"li",h2:"h2",footer:"footer",div:"div",strong:"strong",cite:"cite"},(0,c.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"文件名下划线还是驼峰",children:["文件名：下划线、还是驼峰？",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#文件名下划线还是驼峰",children:"#"})]}),"\n",(0,r.jsx)("img",{src:"https://user\\\\nimages.githubusercontent.com/143572/134878144\\\\n9291d35c\\\\n6458\\\\n4fa9\\\\n9119\\\\n0e67a686bf89.png",width:"300"}),"\n",(0,r.jsxs)(n.p,{children:["很久之前写了个 ",(0,r.jsx)(n.a,{href:"https://github.com/hotoo/jsgf.vim",target:"_blank",rel:"noopener noreferrer",children:"jsgf.vim"})," 插件，可以在 js 代码中 ",(0,r.jsx)(n.code,{children:"gf"})," 两键打开 import 的定义文件。"]}),"\n",(0,r.jsxs)(n.p,{children:["后来又针对 eggjs 的特性写了个 Vim 插件，可以 ",(0,r.jsx)(n.code,{children:"gf"})," 两键打开 controllers, service 定义文件，阅读 eggjs 的代码方便多了，例如"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"  const resp = await ctx.service.mode.name.method();\n                     ^\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\n"})}),"\n",(0,r.jsxs)(n.p,{children:["光标在箭头上方的任意位置按 ",(0,r.jsx)(n.code,{children:"gf"})," 键就可以打开对应的代码定义文件。"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://user%5Cnimages.githubusercontent.com/143572/134893630%5Cn64319acc%5Cne675%5Cn4b5e%5Cn8f39%5Cndf4e20dff0f7.png",alt:"image"})}),"\n",(0,r.jsxs)(n.p,{children:["但是有个问题，就是 eggjs 针对文件名带有下划线或中划线的，会替换成驼峰形式。即文件名为 ",(0,r.jsx)(n.code,{children:"app/service/path\\nname/mode\\nname.js"})," 的路径，Loader 会转换成驼峰形式，在业务代码中必须以驼峰形式调用："]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"  // file path:      app/service/path\\nname/mode\\nname.js\n  const resp = await ctx.service.pathName.modeName.method();\n                                 ^\\n\\n\\n\\n\\n\\n\\n ^\\n\\n\\n\\n\\n\\n\\n\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://user%5Cnimages.githubusercontent.com/143572/134892649%5Cn0b06bb64%5Cnf4ba%5Cn4d73%5Cnb6cb%5Cnd71dda76604a.png",alt:"image"})}),"\n",(0,r.jsx)(n.p,{children:"当时 eggjs 做这个目的，估计也说为了支持和顺应当时的文件名命名规范，当时大多数命名规范要求文件名用小写字母、数字、下划线和中划线。"}),"\n",(0,r.jsx)(n.p,{children:"但是，这种命名规范真的好吗？"}),"\n",(0,r.jsx)(n.p,{children:"我的答案是：绝对不好。"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"一致性：代码中的名字，和实际文件系统名字不一致。"}),"\n",(0,r.jsx)(n.li,{children:"确定性：代码中调用的是驼峰的，而实际文件名到底是驼峰，是下划线，还是中划线？这是不确定的。"}),"\n",(0,r.jsx)(n.li,{children:"唯一性：下划线和中划线都被替换成驼峰，如果同时存在 2 者甚至 3 者，这个定义不是唯一的。"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"eggjs Loader 要支持这种文件名，一个正则表达式就搞定了。很简单。"}),"\n",(0,r.jsx)(n.p,{children:"是的。但是用户要找到定义它的文件，可就苦了。首先需要知道这种（约定俗成的）替换逻辑（程序员的常识？），其次需要 O(3^n) 的时间复杂度和文件系统查询判断才能 \\n\\n不那么准确的\\n\\n 找到对应的定义文件。"}),"\n",(0,r.jsxs)(n.p,{children:["eggjs Loader 加的这个功能，当时不觉得有什么不好，甚至觉得很不错。但是现在细想起来，有点画蛇添足，如果当时不做这个替换，开发者可以用下划线和中划线，下划线也可以在代码中直接使用，中划线你就自己难堪点，用 ",(0,r.jsx)(n.code,{children:"ctx.servcie['path\\nname']['mode\\nname'].method()"})," 也不是不能用。"]}),"\n",(0,r.jsx)(n.p,{children:"这样一致性、确定性、唯一性的问题都没有了。少即是多，什么都不做，反而是更好的选择。"}),"\n",(0,r.jsx)(n.p,{children:"\\n\\n\\n\\n"}),"\n",(0,r.jsx)(n.p,{children:"随便一提："}),"\n",(0,r.jsx)(n.p,{children:"有人说，用 vscode 就没这个困扰，确实，用户输入关键字，vscode 通过模糊算法把所有可能性都列出来，让用户判断和选择，长长的待选列表里确实是有你要的的选项，但更多的是你不要的选项，而且首先你得知道这个黑暗的替换逻辑，其次如果文件系统因为不唯一性，出现 2 个甚至 3 个可能的选项，用户是懵的。"}),"\n",(0,r.jsxs)(n.p,{children:["排除不确定性，Vim 插件可以 ",(0,r.jsx)(n.code,{children:"gf"})," 两键准确定位并打开对应文件，不可同日而语。"]}),"\n",(0,r.jsx)(n.p,{children:"\\n\\n\\n\\n"}),"\n",(0,r.jsx)(n.p,{children:"最后，我不想写个 O(3^n) 复杂度的算法来支持这个东西，然后用了一行命令搞定，业务代码都不用改一行，毫无违和感："}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\\n git mv a\\nb\\nc aBC\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"参考",children:["参考",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#参考",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["\\n ",(0,r.jsx)(n.a,{href:"https://github.com/eggjs/egg%5Cncore/blob/99ef7541b80f73ec4f616628454afde717495f9f/lib/loader/file%5Cnloader.js#L230",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/eggjs/egg\\ncore/blob/99ef7541b80f73ec4f616628454afde717495f9f/lib/loader/file\\nloader.js#L230"}),"\n\\n ",(0,r.jsx)(n.a,{href:"https://www.ruanyifeng.com/blog/2017/02/filename%5Cnshould%5Cnbe%5Cnlowercase.html",target:"_blank",rel:"noopener noreferrer",children:"为什么文件名要小写？ \\n 阮一峰的网络日志"}),"\n\\n ",(0,r.jsx)(n.a,{href:"https://github.com/wwpeng520/blog/blob/master/source/%5Cnposts/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83.md",target:"_blank",rel:"noopener noreferrer",children:"blog/前端项目命名规范.md at master \xb7 wwpeng520/blog"}),"\n\\n ",(0,r.jsx)(n.a,{href:"https://segmentfault.com/q/1010000006040818",target:"_blank",rel:"noopener noreferrer",children:"文件名下划线还是中划线？ \\n SegmentFault 思否"})]}),"\n",(0,r.jsxs)("footer",{class:"blog-post-footer",children:[(0,r.jsx)("div",{class:"blog-post-footer-meta meta-left",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Category:"})," ",(0,r.jsx)("a",{href:"/blog/categories/Technology",children:(0,r.jsx)("cite",{class:"category",children:"Technology"})})]})}),(0,r.jsx)("div",{class:"blog-post-footer-meta meta-right",children:(0,r.jsxs)(n.p,{children:["Published on ",(0,r.jsx)("cite",{class:"date",children:"2021-09-27"})]})})]})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,c.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}let i=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["..%2Fnode_modules%2F.rspress%2Fruntime%2Ftemp-21.mdx"]={toc:[{text:"参考",id:"参考",depth:2}],title:"文件名：下划线、还是驼峰？",headingTitle:"文件名：下划线、还是驼峰？",frontmatter:{category:"Technology",tags:null,date:"2021-09-27T00:00:00.000Z",sidebar:!1,footer:!1}}}}]);