"use strict";(self.webpackChunkhotoo_github_io=self.webpackChunkhotoo_github_io||[]).push([["4174"],{74619:function(e,n,r){r.r(n),r.d(n,{default:()=>t});var l=r(74132),h=r(40453);function a(e){let n=Object.assign({h1:"h1",a:"a",p:"p",pre:"pre",code:"code",ul:"ul",li:"li",h2:"h2"},(0,h.ah)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.h1,{id:"placeholder-最佳实践",children:["placeholder 最佳实践",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#placeholder-最佳实践",children:"#"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"http://dev.w3.org/html5/spec/Overview.html#the-placeholder-attribute",target:"_blank",rel:"noopener noreferrer",children:"placeholder"}),"\n",(0,l.jsx)(n.a,{href:"http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#the-placeholder-attribute",target:"_blank",rel:"noopener noreferrer",children:"2"}),"\n是 HTML5 中的标准属性，它用于定义显示在输入框中的简短提示信息，并在适当的时机\n（比如在输入框获得焦点时）隐匿起来。"]}),"\n",(0,l.jsx)(n.p,{children:"在早期的浏览器中，只能通过 JavaScript 自定义函数来实现。而在早期的实现中又五花八门。"}),"\n",(0,l.jsx)(n.p,{children:"在 HTML 方面，一般是使用自定义的 hint 或者 title 属性放置提示消息。"}),"\n",(0,l.jsx)(n.p,{children:"而在 JavaScript 上，最常见的是通过修改 input 本身的 value 及其 CSS 样式实现。\n一般有直接修改 input 的样式，或者添加 class 两种，后者从某种程度上来说更好些。"}),"\n",(0,l.jsx)(n.p,{children:"早期的实现中还有一个比较不好的问题是，代码里直接判断 input.value 是否为空，\n或者是否为占位符提示的值，如果用户输入的内容如果碰巧和占位符提示相同，则会出现误判。"}),"\n",(0,l.jsx)(n.p,{children:"下面可以说是早期思想中一个较佳的实现："}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'$("input[placeholder]").each(function(){\n    var o=$(this);\n    if(!o.val()){\n        o.val(o.attr("placeholder"));\n        o.addClass("placeholder")\n    }\n    o.focus(function(){\n        if(o.hasClass("placeholder")){\n            o.val("");\n            o.removeClass("placeholder");\n        }\n    }).blur(function(){\n        if(""==o.val()){\n            o.val(o.attr("placeholder"));\n            o.addClass("placeholder");\n        }\n    });\n});\n'})}),"\n",(0,l.jsxs)(n.p,{children:["但是即使如此，直接修改 input.value 同样会有一个几乎无法避免的问题：假如用户在必填项中没有\n输入任何内容，但是占位符会填充其内容，在提交表单时，当然也可以通过判断 input 是否包含\n",(0,l.jsx)(n.code,{children:"placeholder"})," 样式类来针对性处理。但是特殊地，当页面出现脚本错误（这应该说不少见），导致\n表单验证函数未能正确处理而直接提交到服务器，这时服务器是较难准确确认输入框中的内容是占位符，\n还是用户输入的内容的，它只知道这个满足非空条件。"]}),"\n",(0,l.jsx)(n.p,{children:"于是后来有了一种更有趣的实现，它不是直接修改 input.value，而是使用一个附加的元素，占位符消息\n放置在这个元素中，并通过恰当控制这个元素的显示/隐藏，来达到更真实和优秀的体验。"}),"\n",(0,l.jsx)(n.p,{children:"这种实现甚至可以轻易的实现只有用户在输入框中输入内容之后，占位符提示消息才消失。"}),"\n",(0,l.jsx)(n.p,{children:"这个实现要注意以下几点："}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"字体大小等样式要尽量和 input 一致（颜色例外）。"}),"\n",(0,l.jsx)(n.li,{children:"使用 label 作为占位符消息的容器标签，可以加上恰当的 for 属性，实现自动关联。"}),"\n",(0,l.jsx)(n.li,{children:"占位符的位置，可以直接使用 CSS 的相对位置实现，也可以使用 JavaScript 计算获得。"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"比如下面的实现："}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$('input[placeholder],textarea[placeholder]').each(function(){\n    var ME=$(this), id=ME.attr('id'), txt=ME.attr('placeholder');\n    if(!id){\n        id=\"rand_ID_\"+Math.random().toString().substr(2);\n        ME.attr('id', id);\n    }\n    var holder=$('<label for=\"'+id+'\" class=\"placeholder\">'+txt+'</label>')\n    if(holder.width>ME.width()){\n        holder.css({\"width\":ME.width()});\n    }\n    ME.before(holder);\n    function hanlder(){\n        if(ME.val()){\n            holder.hide();\n        }else{\n            holder.show();\n        }\n    }\n    if(\"keyup\"==placeholder_handler){\n        ME.keyup(hanlder);\n    }else{\n        ME.focus(function(){\n            holder.hide();\n        });\n    }\n    ME.blur(hanlder);\n    if(!ME.val()){holder.show();}\n});\n"})}),"\n",(0,l.jsxs)(n.p,{children:["另外对于已经支持 ",(0,l.jsx)(n.code,{children:"placeholder"})," 的浏览器可以忽略上面的代码，而使用浏览器的默认实现。"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'if(!("placeholder" in document.createElement("input"))){\n    // ...\n}\n'})}),"\n",(0,l.jsxs)(n.h2,{id:"延伸阅读",children:["延伸阅读",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#延伸阅读",children:"#"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"http://diveintohtml5.org/forms.html#placeholder",target:"_blank",rel:"noopener noreferrer",children:"diveintohtml5.org#placeholder"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"http://cssrainbow.cn/demos/892.html",target:"_blank",rel:"noopener noreferrer",children:"让所有的浏览器都支持 HTML5 placeholder 属性，基于MooTools"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"http://www.quanlei.com/2010/09/%E8%B7%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84html5-placeholder-%E5%AE%9E%E7%8E%B0/",target:"_blank",rel:"noopener noreferrer",children:"跨浏览器的HTML5 placeholder 实现"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"http://www.zhoumingzhi.com/2009/12/17/inline-form-labels/",target:"_blank",rel:"noopener noreferrer",children:"Inline Form Labels"}),"，\n",(0,l.jsx)(n.a,{href:"http://www.zhoumingzhi.com/2010/08/10/inline-form-labels-2/",target:"_blank",rel:"noopener noreferrer",children:"Inline Form Labels（2）"})]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"http://www.kamikazemusic.com/quick-tips/jquery-html5-placeholder-fix/",target:"_blank",rel:"noopener noreferrer",children:"JQuery HTML5 placeholder fix"})}),"\n"]})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,h.ah)(),e.components);return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}let t=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["blog%2Fpost%2F2010%2Fplaceholder-in-action.md"]={toc:[{text:"延伸阅读",id:"延伸阅读",depth:2}],title:"placeholder 最佳实践",headingTitle:"placeholder 最佳实践",frontmatter:[{template:"post.html"},{pubdate:"2010-12-06T00:00:00.000Z"},{tags:"JavaScript, HTML5"}]}}}]);