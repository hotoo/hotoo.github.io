"use strict";(self.webpackChunkhotoo_github_io=self.webpackChunkhotoo_github_io||[]).push([["4823"],{99481:function(n,e,r){r.r(e),r.d(e,{default:()=>c});var l=r(74132),i=r(40453);function s(n){let e=Object.assign({h1:"h1",a:"a",p:"p",img:"img",pre:"pre",code:"code",ul:"ul",li:"li",strong:"strong"},(0,i.ah)(),n.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.h1,{id:"末尾的逗号",children:["末尾的逗号",(0,l.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#末尾的逗号",children:"#"})]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:"/images/blog/trailing-commas.png",alt:"trailing commas"})}),"\n",(0,l.jsx)(e.p,{children:"早期的 JavaScript 运行环境大都不支持末尾多出来的逗号，或者会抛出异常，或者不符合期望。"}),"\n",(0,l.jsx)(e.p,{children:"比如："}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-js",children:"var obj = {\n  a: 0, // 抛出异常。\n};\n\nvar arr = [\n  0, // arr.length === 2\n];\n"})}),"\n",(0,l.jsx)(e.p,{children:"由于不支持尾逗号，我们以前写代码都需要手动去除尾逗号（工具最多提示你这里多了个逗号）。\n因此我们增加、删除一个属性、数组项时，总是需要担心相邻项的逗号问题。"}),"\n",(0,l.jsx)(e.p,{children:"比如增加一项："}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["如果被增加项是列表的最后一项，则需要给前一项（原最后一项）添加一个逗号，但被添加项本身不添加逗号。","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"新增一项本来并不需要修改前一项，但是在非尾逗号情况下则必须做这个无本质意义的修改。"}),"\n",(0,l.jsx)(e.li,{children:"这很麻烦，也很容易导致错误。"}),"\n",(0,l.jsx)(e.li,{children:"实际你只是增加了一项，但你在 diff 中会看到又是删除项，又是增加项。review 时你就需要关注这些无谓的变更。"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"如果被添加项不是列表的最后一项，则被添加项要加上逗号。"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-diff",children:" var obj = {\n-  a: 0\n+  a: 0,\n+  b: 1\n };\n\n var arr = [\n-  0\n+  0,\n+  1\n ];\n"})}),"\n",(0,l.jsx)(e.p,{children:"删除一项也是："}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"你本来只是要删除了最后一项，但你不得不修改前一项。麻烦，容易出问题。"}),"\n",(0,l.jsx)(e.li,{children:"你本来只是删除了一项，但在 diff 中也是看到又是删除，又是增加。"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-diff",children:" var obj = {\n-  a: 0,\n-  b: 1\n+  a: 0\n };\n\n var arr = [\n-  0,\n-  1\n+  0\n ];\n"})}),"\n",(0,l.jsx)(e.p,{children:"值得高兴的是，现在的 JavaScript 运行环境、预编译工具、语法检查工具都支持了尾逗号。\n一旦我们统一使用尾逗号风格："}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"我们在增加或删除一项时，再也不需要关心相邻项了。"}),"\n",(0,l.jsx)(e.li,{children:"diff 看起来也更直观清爽。"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"新增一项："}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-diff",children:" var obj = {\n   a: 0,\n+  b: 1,\n };\n\n var arr = [\n   0,\n+  1,\n ];\n"})}),"\n",(0,l.jsx)(e.p,{children:"删除一项："}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-diff",children:" var obj = {\n   a: 0,\n-  b: 1,\n };\n\n var arr = [\n   0,\n-  1,\n ];\n"})}),"\n",(0,l.jsx)(e.p,{children:"另外也有些语言是不需要逗号的，每一项都不需要。比如 Markdown 的列表，yml，yaml，\nxml，html 等。"}),"\n",(0,l.jsxs)(e.p,{children:["全要逗号，或者全不要逗号，他们的共同点就是",(0,l.jsx)(e.strong,{children:"一致性"}),"。这种一致性让书写和阅读都非常简洁清晰。\n可维护性也更好。"]}),"\n",(0,l.jsx)(e.p,{children:"你觉得呢？"})]})}function a(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.ah)(),n.components);return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(s,{...n})}):s(n)}let c=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["blog%2Fpost%2F2015%2Ftrailing-commas.md"]={toc:[],title:"末尾的逗号",headingTitle:"末尾的逗号",frontmatter:{date:"2015-08-10T00:00:00.000Z",tags:"Code, Style"}}}}]);