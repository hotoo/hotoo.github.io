"use strict";(self.webpackChunkhotoo_github_io=self.webpackChunkhotoo_github_io||[]).push([["8964"],{56014:function(n,e,r){r.r(e),r.d(e,{default:()=>l});var d=r(74132),s=r(40453);function i(n){let e=Object.assign({h1:"h1",a:"a",p:"p",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",code:"code",pre:"pre",h2:"h2",ul:"ul",li:"li",hr:"hr",strong:"strong",cite:"cite",em:"em",footer:"footer",div:"div"},(0,s.ah)(),n.components);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(e.h1,{id:"深入-iframe-自适应高度",children:["深入 Iframe 自适应高度",(0,d.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#深入-iframe-自适应高度",children:"#"})]}),"\n",(0,d.jsx)(e.p,{children:"DOCTYPE(CSS1Compat): HTML5, HTML4.01 Strict, HTML4.01 Transitional,\nXHTML1.0 Frameset, XHTML1.0 Strict, XHTML1.0 Transitional, XHTML1.1."}),"\n",(0,d.jsxs)(e.table,{children:["\n",(0,d.jsxs)(e.thead,{children:["\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.th,{children:"browser"}),"\n",(0,d.jsx)(e.th,{children:"documentElement"}),"\n",(0,d.jsx)(e.th,{}),"\n",(0,d.jsx)(e.th,{children:"body"}),"\n",(0,d.jsx)(e.th,{}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.tbody,{children:["\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.td,{}),"\n",(0,d.jsx)(e.td,{children:"scrollHeight"}),"\n",(0,d.jsx)(e.td,{children:"offsetHeight"}),"\n",(0,d.jsx)(e.td,{children:"scrollHeight"}),"\n",(0,d.jsx)(e.td,{children:"offsetHeight"}),"\n"]}),"\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.td,{children:"IE"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"\xd7"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n"]}),"\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.td,{children:"FF"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n"]}),"\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.td,{children:"Chrome"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n"]}),"\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.td,{children:"Safari"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n"]}),"\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.td,{children:"Opera"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.p,{children:"non-doctype(BackCompat): 无 DOCTYPE, IE: DOCTYPE 前有非空白字符（包括注释）。"}),"\n",(0,d.jsxs)(e.table,{children:["\n",(0,d.jsxs)(e.thead,{children:["\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.th,{children:"browser"}),"\n",(0,d.jsx)(e.th,{children:"documentElement"}),"\n",(0,d.jsx)(e.th,{}),"\n",(0,d.jsx)(e.th,{children:"body"}),"\n",(0,d.jsx)(e.th,{}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.tbody,{children:["\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.td,{}),"\n",(0,d.jsx)(e.td,{children:"scrollHeight"}),"\n",(0,d.jsx)(e.td,{children:"offsetHeight"}),"\n",(0,d.jsx)(e.td,{children:"scrollHeight"}),"\n",(0,d.jsx)(e.td,{children:"offsetHeight"}),"\n"]}),"\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.td,{children:"IE8"}),"\n",(0,d.jsx)(e.td,{children:"\xd7"}),"\n",(0,d.jsx)(e.td,{children:"\xd7"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"\xd7"}),"\n"]}),"\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.td,{children:"FF5"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n"]}),"\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.td,{children:"Chrome13"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n"]}),"\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.td,{children:"Safari5"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n"]}),"\n",(0,d.jsxs)(e.tr,{children:["\n",(0,d.jsx)(e.td,{children:"Opera11.50"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"√"}),"\n",(0,d.jsx)(e.td,{children:"\xd7"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.p,{children:"测试环境：Windows Server 2003."}),"\n",(0,d.jsxs)(e.p,{children:["综上所述：使用 ",(0,d.jsx)(e.code,{children:"document.body.scrollHeight"})," 是最合适的。"]}),"\n",(0,d.jsxs)(e.h1,{id:"计算高度的时机",children:["计算高度的时机",(0,d.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#计算高度的时机",children:"#"})]}),"\n",(0,d.jsx)(e.p,{children:"父窗口检测子窗口："}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-css",children:"iframe[onload=handler]\n"})}),"\n",(0,d.jsx)(e.p,{children:"本窗口自检测："}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-js",children:"dom-ready = handler;\nwindow.onload = handler;\nbody[onload=handler]\n"})}),"\n",(0,d.jsxs)(e.h2,{id:"子窗口获取自身在父窗口的-iframe-元素",children:["子窗口获取自身在父窗口的 iframe 元素",(0,d.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#子窗口获取自身在父窗口的-iframe-元素",children:"#"})]}),"\n",(0,d.jsx)(e.p,{children:"如果父窗口有名字的话，可以直接通过 frames[name] 直接引用。"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-js",children:'// 求教更恰当的命名。\nfunction getParentFrame(){\n  if(parent == window){return null;}\n  if(window.name){return parent.frames[window.name];}\n  var ifr = parent.document.getElementsByTagName("iframe");\n  for(var i=0,l=ifr.length; i<l; i++){\n    if(window == ifr[i].contentWindow){\n      return ifr[i];\n    }\n  }\n  var ifr = parent.document.getElementsByTagName("frame");\n  for(var i=0,l=ifr.length; i<l; i++){\n    if(window == ifr[i].contentWindow){\n      return ifr[i];\n    }\n  }\n  return null;\n};\n'})}),"\n",(0,d.jsxs)(e.h2,{id:"其他相关",children:["其他相关",(0,d.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#其他相关",children:"#"})]}),"\n",(0,d.jsxs)(e.p,{children:["上面的 ",(0,d.jsx)(e.code,{children:"getParentFrame"})," 通过窗口名字直接取得元素本身，这里要注意的一点，\n以前写代码的时候有这样的代码定义："]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-js",children:'function(){\n  var elem = "elem",\n      name = "name",\n      desc = "desc";\n}\n'})}),"\n",(0,d.jsx)(e.p,{children:"后来要增加一个变量，但是不小心写错标点符号。"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-js",children:'  function(){\n      var elem = "elem",\n+         id = elem.id;\n          name = "name",\n          desc = "desc";\n  }\n'})}),"\n",(0,d.jsxs)(e.p,{children:["然后 name 就成了全局变量，无意中修改了 ",(0,d.jsx)(e.code,{children:"window.name"})," 的值。\n所以如果使用 name 作为局部变量的时候，千万要小心，否则执行这段代码之后，\n",(0,d.jsx)(e.code,{children:"a[target=oldName]"})," 的链接会因为找不到 ",(0,d.jsx)(e.code,{children:"frames[oldName]"})," 而弹出新窗口。"]}),"\n",(0,d.jsxs)(e.h2,{id:"延伸阅读",children:["延伸阅读",(0,d.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#延伸阅读",children:"#"})]}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.a,{href:"http://ued.koubei.com/?p=243",target:"_blank",rel:"noopener noreferrer",children:"再谈iframe自适应高度"})}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.a,{href:"http://ued.koubei.com/?p=1217",target:"_blank",rel:"noopener noreferrer",children:"三谈Iframe自适应高度"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"Tags:"})," ",(0,d.jsx)("a",{href:"/blog/tags/JavaScript",children:(0,d.jsx)("cite",{class:"tags",children:"JavaScript"})})]}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.em,{children:"Published on 2011-08-24"})}),"\n",(0,d.jsxs)("footer",{children:[(0,d.jsx)("div",{class:"meta-left",children:(0,d.jsxs)(e.p,{children:["Tags: ",(0,d.jsx)("a",{href:"/blog/tags/JavaScript",children:(0,d.jsx)("cite",{class:"tags",children:"JavaScript"})})]})}),(0,d.jsx)("div",{class:"meta-right",children:(0,d.jsxs)(e.p,{children:["Date: ",(0,d.jsx)("cite",{class:"date",children:"2011-08-24"})]})})]})]})}function t(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,s.ah)(),n.components);return e?(0,d.jsx)(e,{...n,children:(0,d.jsx)(i,{...n})}):i(n)}let l=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["..%2Fnode_modules%2F.rspress%2Fruntime%2Ftemp-71.mdx"]={toc:[{text:"子窗口获取自身在父窗口的 iframe 元素",id:"子窗口获取自身在父窗口的-iframe-元素",depth:2},{text:"其他相关",id:"其他相关",depth:2},{text:"延伸阅读",id:"延伸阅读",depth:2}],title:"计算高度的时机",headingTitle:"计算高度的时机",frontmatter:{}}}}]);