"use strict";(self.webpackChunkhotoo_github_io=self.webpackChunkhotoo_github_io||[]).push([["9645"],{4969:function(e,r,n){n.r(r),n.d(r,{default:()=>i});var s=n(4132),h=n(453);function a(e){let r=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",pre:"pre",code:"code",ol:"ol",li:"li",footer:"footer",div:"div",strong:"strong",cite:"cite"},(0,h.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.h1,{id:"可恢复的-rm-删除",children:["可恢复的 rm 删除",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#可恢复的-rm-删除",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"用过终端（Terminal）的人都知道， rm 删除的文件，不会像 Mac Finder 里删除文件、文件夹\n一样，会先进入到废纸篓（Trash），一旦 rm 删除，就很难撤销、恢复。"}),"\n",(0,s.jsx)(r.p,{children:"但是作为程序员，做终端里 rm 删除文件是稀松平常的事，那么如何保障在终端中可以放心\n大胆的删除文件、文件夹，而不用担心误删后不可恢复呢？"}),"\n",(0,s.jsx)(r.p,{children:"最直接的想法就是 rm 删除的文件也像 Finder 一样先进废纸篓。"}),"\n",(0,s.jsx)(r.p,{children:"我网上搜寻一番，发现了以下几个工具："}),"\n",(0,s.jsxs)(r.h2,{id:"applescript",children:["AppleScript",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#applescript",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["在 ",(0,s.jsx)(r.a,{href:"https://blog.csdn.net/TinyJian/article/details/78195316",target:"_blank",rel:"noopener noreferrer",children:"Mac 下使用命令行或脚本删除文件到废纸篓"}),"\n这篇文章中介绍，Mac Finder 中删除的文件其实是进入到 ~/.Trash 文件夹。\n但是如果简单的讲文件 mv 到 ~/.Trash 文件夹，是无法做废纸篓里右键恢复到原处的，\n因为这个移动操作没有记录完整的操作行为。"]}),"\n",(0,s.jsx)(r.p,{children:"通过 AppleScript 可以通知 Finder 删除文件："}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'#!/bin/bash\n\nfp=/absolute/path/to/file\nosascript << EOF\ntell application "Finder"\n    posix path of ((delete posix file "\\n{fp}") as unicode text)\nend tell\nEOF\n'})}),"\n",(0,s.jsx)(r.p,{children:"优点："}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"删除时有声效。"}),"\n",(0,s.jsx)(r.li,{children:"有操作记录可“放回原处”。"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"缺点："}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"首次使用是有授权提示，可接受。"}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"rmtrash-1",children:["rmtrash 1",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#rmtrash-1",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"在网上找到好几个不同版本但命名相同的 rmtrash 程序，有的是 shell 脚本，有的是\nXcode 程序。"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"brew install rmtrash\n\nvi ~/.bashrc\nalias rm='rmtrash'\nsource ~/.bashrc\n"})}),"\n",(0,s.jsx)(r.p,{children:"缺点："}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"删除时没有声效。"}),"\n",(0,s.jsx)(r.li,{children:"在废纸篓不可直接“放回原处”。"}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"rmtrash-2-objectivenc",children:["rmtrash 2: Objective\\nC",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#rmtrash-2-objectivenc",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["\\n ",(0,s.jsx)(r.a,{href:"https://www.nightproductions.net/cli.htm",target:"_blank",rel:"noopener noreferrer",children:"https://www.nightproductions.net/cli.htm"})]}),"\n",(0,s.jsx)(r.p,{children:"这个版本的 rmtrash 是用 Objective\\nC 编写的应用程序，但是版本有点老，下载安装好\nrmtrash 发现并不能在 macOS Mojave (10.14) 中正常运行。"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"\\n rmtrash\nzsh: bad CPU type in executable: rmtrash\n"})}),"\n",(0,s.jsx)(r.p,{children:"缺点：不支持 macOS Mojave。"}),"\n",(0,s.jsxs)(r.h2,{id:"rmtrash-3-shell",children:["rmtrash 3: Shell",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#rmtrash-3-shell",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.a,{href:"https://github.com/LaiJingli/rmtrash",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/LaiJingli/rmtrash"})}),"\n",(0,s.jsx)(r.p,{children:"从源码上看，被删除的文件是进入了自定义的 ~/.rmtrash/ 文件夹（这不是期望的），\n另外还有一堆其他的功能，例如 list, mv, restore, empty。"}),"\n",(0,s.jsx)(r.p,{children:"缺点：代码写的太烂，我是不会用的。"}),"\n",(0,s.jsxs)(r.h2,{id:"rmntrash-shell",children:["rm\\ntrash: Shell",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#rmntrash-shell",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.a,{href:"https://github.com/nateshmbhat/rm%5Cntrash",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/nateshmbhat/rm\\ntrash"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"\\n rm\\ntrash ~/tmp\nrm\\ntrash: line 165: realpath: command not found\nusage: dirname path\nusage: cp [\\nR [\\nH | \\nL | \\nP]] [\\nfi | \\nn] [\\napvXc] source\\nfile target\\nfile\n       cp [\\nR [\\nH | \\nL | \\nP]] [\\nfi | \\nn] [\\napvXc] source\\nfile ... target\\ndirectory\nError copying the /Users/hotoo/tmp to trash. Trying to move /Users/hotoo/tmp with the name /Users/hotoo/tmp (0)\n"})}),"\n",(0,s.jsx)(r.p,{children:"不过 ~/tmp 实际已被删除到未知域。"}),"\n",(0,s.jsx)(r.p,{children:"优点："}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"支持 Linux。"}),"\n",(0,s.jsx)(r.li,{children:"代码写的很漂亮。"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"缺点："}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"不太支持 macOS，可以删除文件但在 macOS 下执行有报错。"}),"\n",(0,s.jsx)(r.li,{children:"删除的目录不是 macOS 的 .Trash 目录，无法在 macOS 的废纸篓中找到并放回原处。"}),"\n",(0,s.jsx)(r.li,{children:"安装有点麻烦。"}),"\n"]}),"\n",(0,s.jsxs)(r.h2,{id:"rmtrash-shell",children:["rmtrash: Shell",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#rmtrash-shell",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.a,{href:"https://github.com/PhrozenByte/rmtrash",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/PhrozenByte/rmtrash"})}),"\n",(0,s.jsxs)(r.h2,{id:"rmtrash-for-mac-os-x-objectivenc",children:["rmtrash for Mac OS X: Objective\\nC",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#rmtrash-for-mac-os-x-objectivenc",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["\\n ",(0,s.jsx)(r.a,{href:"https://github.com/sebikeller/rmtrash%5Cnfor%5CnMac%5CnOS%5CnX",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/sebikeller/rmtrash\\nfor\\nMac\\nOS\\nX"})]}),"\n",(0,s.jsxs)(r.h2,{id:"参考",children:["参考",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#参考",children:"#"})]}),"\n",(0,s.jsxs)(r.p,{children:["\\n ",(0,s.jsx)(r.a,{href:"https://apple.stackexchange.com/questions/194672/why%5Cndoesnt%5Cnthe%5Cnrm%5Cncommand%5Cndump%5Cnfile%5Cnin%5Cntrash/194868",target:"_blank",rel:"noopener noreferrer",children:"Why doesn't the 'rm' command dump file in Trash?"}),"\n\\n ",(0,s.jsx)(r.a,{href:"https://apple.stackexchange.com/questions/17622/how%5Cncan%5Cni%5Cnmake%5Cnrm%5Cnmove%5Cnfiles%5Cnto%5Cnthe%5Cntrash%5Cncan",target:"_blank",rel:"noopener noreferrer",children:"How can I make 'rm' move files to the trash can?"}),"\n\\n ",(0,s.jsx)(r.a,{href:"https://github.com/andreafrancia/trash%5Cncli",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/andreafrancia/trash\\ncli"}),"\n\\n ",(0,s.jsx)(r.a,{href:"https://www.ibm.com/developerworks/cn/linux/1410%5Cnlicy%5Cnlinuxtrash/",target:"_blank",rel:"noopener noreferrer",children:"回收站功能在 Linux 中的实现"})]}),"\n",(0,s.jsxs)(r.h2,{id:"总结",children:["总结",(0,s.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#总结",children:"#"})]}),"\n",(0,s.jsx)(r.p,{children:"基于上面的这么多的对比，我实现了一个便于安装、使用的脚本，欢迎使用。"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.a,{href:"https://github.com/hotoo/rm%5Cntrash",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/hotoo/rm\\ntrash"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"\\n npm i \\ng rm\\ntrash\n"})}),"\n",(0,s.jsxs)("footer",{class:"blog-post-footer",children:[(0,s.jsx)("div",{class:"blog-post-footer-meta meta-left",children:(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Category:"})," ",(0,s.jsx)("a",{href:"/blog/categories/Technology",children:(0,s.jsx)("cite",{class:"category",children:"Technology"})}),"\n",(0,s.jsx)(r.strong,{children:"Tags:"})," ",(0,s.jsx)("a",{href:"/blog/tags/rm",children:(0,s.jsx)("cite",{class:"tags",children:"rm"})}),", ",(0,s.jsx)("a",{href:"/blog/tags/Trash",children:(0,s.jsx)("cite",{class:"tags",children:"Trash"})}),", ",(0,s.jsx)("a",{href:"/blog/tags/Mac",children:(0,s.jsx)("cite",{class:"tags",children:"Mac"})}),", ",(0,s.jsx)("a",{href:"/blog/tags/Terminal",children:(0,s.jsx)("cite",{class:"tags",children:"Terminal"})})]})}),(0,s.jsx)("div",{class:"blog-post-footer-meta meta-right",children:(0,s.jsxs)(r.p,{children:["Published on ",(0,s.jsx)("cite",{class:"date",children:"2019-03-04"})]})})]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,h.ah)(),e.components);return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}let i=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["..%2Fnode_modules%2F.rspress%2Fruntime%2Ftemp-24.mdx"]={toc:[{text:"AppleScript",id:"applescript",depth:2},{text:"rmtrash 1",id:"rmtrash-1",depth:2},{text:"rmtrash 2: Objective\\nC",id:"rmtrash-2-objectivenc",depth:2},{text:"rmtrash 3: Shell",id:"rmtrash-3-shell",depth:2},{text:"rm\\ntrash: Shell",id:"rmntrash-shell",depth:2},{text:"rmtrash: Shell",id:"rmtrash-shell",depth:2},{text:"rmtrash for Mac OS X: Objective\\nC",id:"rmtrash-for-mac-os-x-objectivenc",depth:2},{text:"参考",id:"参考",depth:2},{text:"总结",id:"总结",depth:2}],title:"可恢复的 rm 删除",headingTitle:"可恢复的 rm 删除",frontmatter:{category:"Technology",tags:"rm, Trash, Mac, Terminal",date:"2019-03-04T00:00:00.000Z"}}}}]);