"use strict";(self.webpackChunkhotoo_github_io=self.webpackChunkhotoo_github_io||[]).push([["5412"],{78555:function(e,n,r){r.r(n),r.d(n,{default:()=>d});var t=r(74132),s=r(40453);function h(e){let n=Object.assign({h1:"h1",a:"a",p:"p",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",hr:"hr",ul:"ul",li:"li",img:"img"},(0,s.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"每周异常第-1-期",children:["每周异常：第 1 期",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#每周异常第-1-期",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["2013-07-15 14:00~14:03，来自",(0,t.jsx)(n.a,{href:"http://www.ip.cn/?q=180.184.99.37",target:"_blank",rel:"noopener noreferrer",children:"北京市时代互联(180.184.99.37)"}),"\n的 pc/-1|windows/6.2|firefox/22.0|gecko/20100101 用户向支付宝 katongweb 系统发起1480次猛烈的总攻。"]}),"\n",(0,t.jsx)(n.p,{children:"详情如下："}),"\n",(0,t.jsxs)(n.table,{children:["\n",(0,t.jsxs)(n.thead,{children:["\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.th,{children:"KEY"}),"\n",(0,t.jsx)(n.th,{children:"VALUE"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.tbody,{children:["\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"Ref"}),"\n",(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://ref.example.com/ref.htm",target:"_blank",rel:"noopener noreferrer",children:"https://ref.example.com/ref.htm"})}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"URL"}),"\n",(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://www.example.com/index.htm",target:"_blank",rel:"noopener noreferrer",children:"https://www.example.com/index.htm"})}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"File"}),"\n",(0,t.jsx)(n.td,{children:"chrome://grabword/content/grabword.js"}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"Line"}),"\n",(0,t.jsx)(n.td,{children:"0"}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"Message"}),"\n",(0,t.jsx)(n.td,{children:"Script error."}),"\n"]}),"\n",(0,t.jsxs)(n.tr,{children:["\n",(0,t.jsx)(n.td,{children:"stacktrace"}),"\n",(0,t.jsx)(n.td,{}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"该用户通过 Ref 页面到目标 URL 之后，连续不断的通过 Firefox 插件脚本触发脚本异常。"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:"通过最近的几次异常报警来看，由客户端连续发起攻击引起的 JavaScript 异常 PV\n非正常波动，对异常监控数据有比较大的影响。"}),"\n",(0,t.jsx)(n.p,{children:"因此考虑以下方案来提升监控数据的稳定有效性："}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"监控 JavaScript 异常 UV(根据 Session)"}),"\n",(0,t.jsx)(n.li,{children:"监控 JavaScript 异常独立 IP 数。"}),"\n",(0,t.jsxs)(n.li,{children:["排除客户端本地脚本引起的异常（多数攻击是由客户端脚本发起）","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"今日客户端脚本异常率：45.14%"}),"\n",(0,t.jsx)(n.li,{children:"正常情况下客户端脚本异常率：3.45%"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:"下图是排除了客户端本地脚本抛出的异常之后的结果："}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://f.cloud.github.com/assets/143572/803190/d77e2dea-ede7-11e2-92cb-1717857ecdbc.png",alt:"2013-07-16 3 14 24"})}),"\n",(0,t.jsx)(n.p,{children:"（当天数据对比，图中圆点是开启过滤客户端本地异常的时间点，下同）"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://f.cloud.github.com/assets/143572/803189/d77f22cc-ede7-11e2-9412-25920ec1c4d6.png",alt:"2013-07-16 3 16 22"})}),"\n",(0,t.jsx)(n.p,{children:"（相近2天数据对比）"})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}let d=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["blog%2Fpost%2F2013%2Fweekly-topic-about-exceptions-1.md"]={toc:[],title:"每周异常：第 1 期",headingTitle:"每周异常：第 1 期",frontmatter:[{template:"post.html"},{pubdate:"2013-07-15T00:00:00.000Z"},{tags:"每周异常"}]}}}]);